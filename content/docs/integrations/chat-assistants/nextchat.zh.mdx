---
title: NextChat
description: 配置 NextChat 使用 NexusGate
icon: MessageCircle
---

NextChat（原 ChatGPT-Next-Web）是一款可自托管的 AI 对话 Web 应用，支持多种模型服务，可一键部署。

## 工具简介

- **官方网站**：[nextchat.dev](https://nextchat.dev/)
- **GitHub**：[ChatGPTNextWeb/ChatGPT-Next-Web](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web)
- **支持部署**：Vercel、Docker、Cloudflare
- **特点**：
  - 一键部署
  - 响应式设计
  - Markdown 支持
  - 多语言界面

## 配置步骤

### 方式一：Docker 部署

```bash
docker run -d \
  -p 3000:3000 \
  -e OPENAI_API_KEY="your-nexusgate-api-key" \
  -e BASE_URL="http://your-nexusgate-server:8080" \
  --name nextchat \
  yidadaa/chatgpt-next-web
```

将配置值替换为 <ServerUrl /> 和 <ApiKeyLink />。

### 方式二：Docker Compose

创建 `docker-compose.yml`：

```yaml
version: '3'
services:
  nextchat:
    image: yidadaa/chatgpt-next-web
    ports:
      - "3000:3000"
    environment:
      - OPENAI_API_KEY=your-nexusgate-api-key
      - BASE_URL=http://your-nexusgate-server:8080
      - CODE=your-access-code  # 可选，访问密码
    restart: unless-stopped
```

启动服务：

```bash
docker compose up -d
```

### 方式三：Vercel 部署

1. Fork [NextChat 仓库](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web)
2. 在 Vercel 导入项目
3. 配置环境变量：

| 变量 | 值 |
|------|-----|
| `OPENAI_API_KEY` | <ApiKeyLink /> |
| `BASE_URL` | <ServerUrl /> |
| `CODE` | 访问密码（可选） |

### 4. 访问使用

打开浏览器访问 `http://localhost:3000`

{/* TODO: 添加 NextChat 界面截图 */}
{/* ![NextChat 界面](./images/nextchat-ui.png) */}

## 使用示例

### 基本对话

1. 点击「新的聊天」
2. 输入问题并发送
3. 等待 AI 回复

### 使用预设角色

1. 点击「面具」图标
2. 选择预设角色
3. 开始角色扮演对话

### 导出对话

1. 点击对话设置
2. 选择「导出」
3. 下载 Markdown 文件

## 高级配置

### 环境变量

| 变量 | 说明 | 示例 |
|------|------|------|
| `OPENAI_API_KEY` | API 密钥 | `sk-xxx` |
| `BASE_URL` | API 地址 | `http://server:8080` |
| `CODE` | 访问密码 | `password123` |
| `HIDE_USER_API_KEY` | 隐藏 API Key 设置 | `1` |
| `DISABLE_GPT4` | 禁用 GPT-4 | `1` |
| `ENABLE_BALANCE_QUERY` | 启用余额查询 | `1` |
| `CUSTOM_MODELS` | 自定义模型列表 | `gpt-4o,claude-3` |

### 自定义模型列表

通过 `CUSTOM_MODELS` 环境变量配置可用模型：

```bash
CUSTOM_MODELS="-all,+gpt-4o,+gpt-4o-mini,+claude-sonnet-4-20250514,+deepseek-chat"
```

- `-all`: 移除所有默认模型
- `+model`: 添加模型
- `-model`: 移除模型

### 配置访问控制

```bash
# 设置访问密码
CODE=your-password

# 多个密码用逗号分隔
CODE=password1,password2,password3
```

### 自定义 Prompt

创建自定义角色面具：

```json
{
  "name": "代码助手",
  "context": [
    {
      "role": "system",
      "content": "你是一位专业的软件工程师，擅长多种编程语言。请使用中文回复，代码注释使用英文。"
    }
  ],
  "modelConfig": {
    "model": "gpt-4o",
    "temperature": 0.7,
    "max_tokens": 4096
  }
}
```

## 常见问题

### Q: 部署后无法访问？

1. 检查端口是否正确映射
2. 确认防火墙设置
3. 查看 Docker 日志

```bash
docker logs nextchat
```

### Q: API 调用失败？

1. 验证 `BASE_URL` 格式（注意结尾不需要 `/v1`）
2. 检查 API Key 是否正确
3. 确认 NexusGate 服务可访问

### Q: 如何更新版本？

```bash
# Docker
docker pull yidadaa/chatgpt-next-web
docker compose up -d

# Vercel
# 在 Vercel 控制台重新部署
```

### Q: 如何启用流式响应？

NextChat 默认启用流式响应，确保 NexusGate 支持 SSE。

### Q: 移动端适配问题？

NextChat 支持 PWA，可以添加到主屏幕使用：

1. 在移动浏览器打开
2. 选择「添加到主屏幕」
3. 作为应用使用

## 相关链接

- [NextChat 官网](https://nextchat.dev/)
- [NextChat GitHub](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web)
- [部署文档](https://github.com/ChatGPTNextWeb/ChatGPT-Next-Web#deploy-on-your-own)
