---
title: Claude Code
description: 配置 Claude Code 使用 NexusGate
icon: Terminal
---

Claude Code 是 Anthropic 官方推出的 AI 编程助手 CLI 工具，可以直接在终端中与 Claude 进行交互，完成代码编写、调试、重构等任务。

## 工具简介

- **官方网站**：[claude.ai/claude-code](https://claude.ai/claude-code)
- **支持平台**：macOS、Linux、Windows (WSL)
- **特点**：
  - 终端原生体验
  - 支持多文件编辑
  - 强大的代码理解能力
  - 支持 MCP 协议扩展

## 配置步骤

### 1. 安装 Claude Code

```bash
# 使用 npm 安装
npm install -g @anthropic-ai/claude-code

# 或使用 Homebrew (macOS)
brew install claude-code
```

### 2. 配置 NexusGate API

Claude Code 支持通过环境变量配置自定义 API 端点。

#### 方式一：设置环境变量

<ConfigCode lang="bash">
<CodeLine><CodeComment># 在 ~/.bashrc 或 ~/.zshrc 中添加</CodeComment></CodeLine>
<CodeLine><CodeKeyword>export</CodeKeyword> ANTHROPIC_BASE_URL=<CodeString>"<ServerUrl path="/v1" />"</CodeString></CodeLine>
<CodeLine><CodeKeyword>export</CodeKeyword> ANTHROPIC_API_KEY=<CodeString>"<ApiKeyLink />"</CodeString></CodeLine>
</ConfigCode>

#### 方式二：使用配置文件

编辑 `~/.claude-code/config.json`：

<ConfigCode lang="json">
<CodeLine>{"{"}</CodeLine>
<CodeLine>  <CodeString>"apiBaseUrl"</CodeString>: <CodeString>"<ServerUrl path="/v1" />"</CodeString>,</CodeLine>
<CodeLine>  <CodeString>"apiKey"</CodeString>: <CodeString>"<ApiKeyLink />"</CodeString></CodeLine>
<CodeLine>{"}"}</CodeLine>
</ConfigCode>

### 3. 验证配置

```bash
claude-code --version
claude-code "Hello, Claude!"
```

## 使用示例

### 基本对话

```bash
claude-code "请帮我解释这段代码的作用"
```

### 编辑文件

```bash
claude-code "请修复 src/main.ts 中的类型错误"
```

### 项目分析

```bash
claude-code "分析这个项目的架构"
```

## 高级配置

### 配置模型

在 NexusGate 中配置好 Claude 模型后，Claude Code 会自动使用可用的模型：

```bash
# 指定使用特定模型
claude-code --model claude-sonnet-4-20250514 "你好"
```

### 配置代理

如果需要通过代理访问：

```bash
export HTTPS_PROXY="http://proxy:port"
export HTTP_PROXY="http://proxy:port"
```

## 常见问题

### Q: 连接失败怎么办？

1. 检查 `ANTHROPIC_BASE_URL` 是否正确设置
2. 确认 NexusGate 服务正在运行
3. 验证 API Key 是否有效

### Q: 模型不可用？

确保在 NexusGate 中已配置 Anthropic 上游服务，并且 API Key 具有相应权限。

### Q: 如何查看请求日志？

```bash
# 启用调试模式
export CLAUDE_CODE_DEBUG=1
claude-code "测试"
```

## 相关链接

- [Claude Code 官方文档](https://docs.anthropic.com/claude-code)
- [NexusGate GitHub](https://github.com/EM-GeekLab/NexusGate)
