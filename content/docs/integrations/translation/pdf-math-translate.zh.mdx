---
title: PDFMathTranslate
description: 配置 PDFMathTranslate 使用 NexusGate
icon: FileText
---

PDFMathTranslate 是一款专门用于翻译学术 PDF 文档的工具，能够保留公式、图表等格式，特别适合翻译论文。

## 工具简介

- **GitHub**：[Byaidu/PDFMathTranslate](https://github.com/Byaidu/PDFMathTranslate)
- **支持平台**：Windows、macOS、Linux
- **特点**：
  - 保留数学公式
  - 保持文档布局
  - 支持多种翻译服务
  - 支持批量翻译

## 配置步骤

### 1. 安装 PDFMathTranslate

#### 使用 pip

```bash
pip install pdf2zh
```

#### 从源码安装

```bash
git clone https://github.com/Byaidu/PDFMathTranslate.git
cd PDFMathTranslate
pip install -e .
```

### 2. 配置环境变量

设置 NexusGate API 信息：

```bash
# Linux/macOS
export OPENAI_BASE_URL="http://your-nexusgate-server:8080/api/v1"
export OPENAI_API_KEY="your-nexusgate-api-key"

# Windows PowerShell
$env:OPENAI_BASE_URL="http://your-nexusgate-server:8080/api/v1"
$env:OPENAI_API_KEY="your-nexusgate-api-key"
```

将配置值替换为 <ServerUrl path="/api/v1" /> 和 <ApiKeyLink />。

或在 `~/.bashrc` / `~/.zshrc` 中永久配置：

```bash
export OPENAI_BASE_URL="http://your-nexusgate-server:8080/api/v1"
export OPENAI_API_KEY="your-nexusgate-api-key"
```

### 3. 验证安装

```bash
pdf2zh --version
```

## 使用示例

### 基本翻译

```bash
# 翻译单个 PDF
pdf2zh input.pdf

# 指定输出文件
pdf2zh input.pdf -o output.pdf

# 指定目标语言
pdf2zh input.pdf -t zh
```

### 使用特定模型

```bash
# 使用 GPT-4o 翻译
pdf2zh input.pdf -s openai -m gpt-4o

# 使用 GPT-4o-mini（更快）
pdf2zh input.pdf -s openai -m gpt-4o-mini
```

### 批量翻译

```bash
# 翻译目录下所有 PDF
pdf2zh ./papers/

# 指定输出目录
pdf2zh ./papers/ -o ./translated/
```

### 翻译指定页面

```bash
# 只翻译前 10 页
pdf2zh input.pdf -p 1-10

# 翻译特定页面
pdf2zh input.pdf -p 1,3,5-10
```

## 高级配置

### 配置文件

创建配置文件 `~/.pdf2zh/config.yaml`：

```yaml
# 翻译服务配置
service: openai
model: gpt-4o-mini

# API 配置
openai:
  base_url: http://your-nexusgate-server:8080/api/v1
  api_key: your-nexusgate-api-key

# 翻译设置
target_language: zh
preserve_formula: true
preserve_figure: true

# 并发设置
threads: 4
```

### 自定义翻译 Prompt

```yaml
# 在配置文件中添加
prompt: |
  你是一位专业的学术翻译专家，请将以下学术文本翻译成中文。
  要求：
  1. 保持学术术语的准确性
  2. 公式和变量名保持原样
  3. 保持段落结构
  4. 专有名词首次出现时注明英文原文
```

### 配置多个翻译服务

```yaml
services:
  primary:
    type: openai
    base_url: http://your-nexusgate-server:8080/api/v1
    api_key: your-api-key
    model: gpt-4o

  fallback:
    type: openai
    base_url: http://your-nexusgate-server:8080/api/v1
    api_key: your-api-key
    model: gpt-4o-mini
```

## 命令行参数

| 参数 | 说明 | 示例 |
|------|------|------|
| `-o` | 输出文件/目录 | `-o output.pdf` |
| `-t` | 目标语言 | `-t zh` |
| `-s` | 翻译服务 | `-s openai` |
| `-m` | 模型名称 | `-m gpt-4o` |
| `-p` | 页面范围 | `-p 1-10` |
| `--threads` | 并发数 | `--threads 4` |

## 常见问题

### Q: 翻译后公式显示异常？

1. 确保使用最新版本
2. 检查 PDF 是否为扫描版（建议使用文字版）
3. 尝试调整公式保护选项

### Q: 翻译速度很慢？

1. 使用更快的模型（gpt-4o-mini）
2. 增加并发线程数
3. 只翻译需要的页面

### Q: 内存占用过高？

1. 减少并发数
2. 分批翻译大文档
3. 使用 `--low-memory` 模式

### Q: 翻译质量不佳？

1. 使用更强的模型（gpt-4o 或 claude）
2. 自定义翻译 Prompt
3. 针对特定领域调整术语表

### Q: 如何翻译扫描版 PDF？

扫描版 PDF 需要先进行 OCR：

```bash
# 使用 OCR 模式
pdf2zh input.pdf --ocr
```

## Web 界面

PDFMathTranslate 也提供 Web 界面：

```bash
# 启动 Web 服务
pdf2zh-server

# 指定端口
pdf2zh-server --port 8000
```

访问 `http://localhost:8000` 使用图形界面。

## 相关链接

- [PDFMathTranslate GitHub](https://github.com/Byaidu/PDFMathTranslate)
- [使用文档](https://github.com/Byaidu/PDFMathTranslate/blob/main/README.md)
- [问题反馈](https://github.com/Byaidu/PDFMathTranslate/issues)
